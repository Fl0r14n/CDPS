package com.threepillarglobal.labs.cdps.web;

import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.Path;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@Path("/")
public class UIController {

    private static final String bpChartData = "[{\"17\":{\"10\":{\"1241\":\"733.535226402281\",\"31241\":\"733.4552264022809\"},\"11\":{\"1241\":\"733.3752264022809\",\"31241\":\"733.2952264022808\"},\"59\":{\"1241\":\"725.695226402277\",\"31241\":\"725.6152264022769\"},\"08\":{\"1241\":\"733.8552264022811\",\"31241\":\"733.7752264022811\"},\"09\":{\"1241\":\"733.695226402281\",\"31241\":\"733.615226402281\"},\"04\":{\"1241\":\"734.4952264022814\",\"31241\":\"734.4152264022814\"},\"05\":{\"1241\":\"734.3352264022814\",\"31241\":\"734.2552264022813\"},\"06\":{\"1241\":\"734.1752264022813\",\"31241\":\"734.0952264022812\"},\"07\":{\"1241\":\"734.0152264022812\",\"31241\":\"733.9352264022812\"},\"00\":{\"1241\":\"735.1352264022818\",\"31241\":\"735.0552264022817\"},\"01\":{\"1241\":\"734.9752264022817\",\"31241\":\"734.8952264022817\"},\"02\":{\"1241\":\"734.8152264022816\",\"31241\":\"734.7352264022816\"},\"03\":{\"1241\":\"734.6552264022815\",\"31241\":\"734.5752264022815\"}},\"19\":{\"10\":{\"1241\":\"714.4152264022794\",\"31241\":\"714.3352264022793\"},\"11\":{\"1241\":\"714.2552264022793\",\"31241\":\"714.1752264022792\"},\"12\":{\"1241\":\"714.0952264022792\",\"31241\":\"714.0152264022792\"},\"13\":{\"1241\":\"713.9352264022791\",\"31241\":\"713.8552264022791\"},\"14\":{\"1241\":\"713.775226402279\",\"31241\":\"713.695226402279\"},\"15\":{\"1241\":\"713.615226402279\",\"31241\":\"713.5352264022789\"},\"02\":{\"1241\":\"715.69522640228\",\"31241\":\"715.61522640228\"},\"03\":{\"1241\":\"715.5352264022799\",\"31241\":\"715.4552264022799\"}},\"day\":\"2013-12-05\"},{\"17\":{\"10\":{\"1241\":\"733.535226402281\",\"31241\":\"733.4552264022809\"},\"11\":{\"1241\":\"733.3752264022809\",\"31241\":\"733.2952264022808\"},\"59\":{\"1241\":\"725.695226402277\",\"31241\":\"725.6152264022769\"},\"08\":{\"1241\":\"733.8552264022811\",\"31241\":\"733.7752264022811\"},\"09\":{\"1241\":\"733.695226402281\",\"31241\":\"733.615226402281\"},\"04\":{\"1241\":\"734.4952264022814\",\"31241\":\"734.4152264022814\"},\"05\":{\"1241\":\"734.3352264022814\",\"31241\":\"734.2552264022813\"},\"06\":{\"1241\":\"734.1752264022813\",\"31241\":\"734.0952264022812\"},\"07\":{\"1241\":\"734.0152264022812\",\"31241\":\"733.9352264022812\"},\"00\":{\"1241\":\"735.1352264022818\",\"31241\":\"735.0552264022817\"},\"01\":{\"1241\":\"734.9752264022817\",\"31241\":\"734.8952264022817\"},\"02\":{\"1241\":\"4.8152264022816\",\"31241\":\"734.7352264022816\"},\"03\":{\"1241\":\"734.6552264022815\",\"31241\":\"734.5752264022815\"}},\"19\":{\"10\":{\"1241\":\"994.4152264022794\",\"31241\":\"714.3352264022793\"},\"11\":{\"1241\":\"714.2552264022793\",\"31241\":\"714.1752264022792\"},\"12\":{\"1241\":\"714.0952264022792\",\"31241\":\"714.0152264022792\"},\"13\":{\"1241\":\"713.9352264022791\",\"31241\":\"713.8552264022791\"},\"14\":{\"1241\":\"713.775226402279\",\"31241\":\"713.695226402279\"},\"15\":{\"1241\":\"713.615226402279\",\"31241\":\"713.5352264022789\"},\"02\":{\"1241\":\"715.69522640228\",\"31241\":\"715.61522640228\"},\"03\":{\"1241\":\"715.5352264022799\",\"31241\":\"88.4552264022799\"}},\"day\":\"2013-12-06\"}]";
    private static final String colChartData = "[{\"16\":{\"10\":{\"141\":\"63.535226402281\",\"31241\":\"63.4552264022809\"},\"11\":{\"1241\":\"33.3652264022809\",\"311\":\"633.2952264022808\"},\"59\":{\"1241\":\"625.695226402266\",\"31241\":\"625.6152264022669\"},\"08\":{\"1241\":\"633.8552264022811\",\"31241\":\"633.6652264022811\"},\"09\":{\"1241\":\"633.695226402281\",\"31241\":\"633.615226402281\"},\"04\":{\"1241\":\"634.4952264022814\",\"31241\":\"634.4152264022814\"},\"05\":{\"1241\":\"634.3352264022814\",\"31241\":\"634.2552264022813\"},\"06\":{\"1241\":\"634.1652264022813\",\"31241\":\"634.0952264022812\"},\"06\":{\"1241\":\"634.0152264022812\",\"31241\":\"633.9352264022812\"},\"00\":{\"1241\":\"635.1352264022818\",\"31241\":\"635.0552264022816\"},\"01\":{\"1241\":\"634.9652264022816\",\"31241\":\"634.8952264022816\"},\"02\":{\"1241\":\"634.8152264022816\",\"31241\":\"634.6352264022816\"},\"03\":{\"1241\":\"634.6552264022815\",\"31241\":\"634.5652264022815\"}},\"19\":{\"10\":{\"1241\":\"614.4152264022694\",\"31241\":\"614.3352264022693\"},\"11\":{\"1241\":\"614.2552264022693\",\"31241\":\"614.1652264022692\"},\"12\":{\"1241\":\"614.0952264022692\",\"31241\":\"614.0152264022692\"},\"13\":{\"1241\":\"613.9352264022691\",\"31241\":\"613.8552264022691\"},\"14\":{\"1241\":\"613.665226402269\",\"31241\":\"613.695226402269\"},\"15\":{\"1241\":\"613.615226402269\",\"31241\":\"613.5352264022689\"},\"02\":{\"1241\":\"615.69522640228\",\"31241\":\"615.61522640228\"},\"03\":{\"1241\":\"615.5352264022699\",\"31241\":\"615.4552264022699\"}},\"day\":\"2013-12-05\"},{\"16\":{\"10\":{\"1241\":\"933.535226402281\",\"31241\":\"633.4552264022809\"},\"11\":{\"1241\":\"633.3652264022809\",\"31241\":\"233.2952264022808\"},\"59\":{\"1241\":\"325.695226402266\",\"31241\":\"625.6152264022669\"},\"08\":{\"1241\":\"433.8552264022811\",\"31241\":\"633.6652264022811\"},\"09\":{\"1241\":\"633.695226402281\",\"31241\":\"633.615226402281\"},\"04\":{\"1241\":\"634.4952264022814\",\"31241\":\"634.4152264022814\"},\"05\":{\"1241\":\"634.3352264022814\",\"31241\":\"634.2552264022813\"},\"06\":{\"1241\":\"634.1652264022813\",\"31241\":\"634.0952264022812\"},\"06\":{\"1241\":\"634.0152264022812\",\"31241\":\"633.9352264022812\"},\"00\":{\"1241\":\"635.1352264022818\",\"31241\":\"635.0552264022816\"},\"01\":{\"1241\":\"634.9652264022816\",\"31241\":\"634.8952264022816\"},\"02\":{\"1241\":\"4.8152264022816\",\"31241\":\"634.6352264022816\"},\"03\":{\"1241\":\"634.6552264022815\",\"31241\":\"634.5652264022815\"}},\"19\":{\"10\":{\"1241\":\"994.4152264022694\",\"31241\":\"614.3352264022693\"},\"11\":{\"1241\":\"614.2552264022693\",\"31241\":\"614.1652264022692\"},\"12\":{\"1241\":\"614.0952264022692\",\"31241\":\"614.0152264022692\"},\"13\":{\"1241\":\"613.9352264022691\",\"31241\":\"613.8552264022691\"},\"14\":{\"1241\":\"613.665226402269\",\"31241\":\"613.695226402269\"},\"15\":{\"1241\":\"613.615226402269\",\"31241\":\"653.5352264022689\"},\"02\":{\"1241\":\"515.69522640228\",\"31241\":\"15.61522640228\"},\"03\":{\"1241\":\"215.5352264022699\",\"31241\":\"188.4552264022699\"}},\"day\":\"2013-12-06\"}]";

    private final List<User> data;

    UIController() {
        this.data = new ArrayList<>();
        // init data for testing
        data.add(new User("cpaun", "Cristian Paun", "03.07.1907"));
        data.add(new User("fchis", "Florian Chis", "04.08.1997"));
        data.add(new User("soros", "Sebastian Oros", "23.11.2907"));
        data.add(new User("dmatei", "Dorel Matei", "04.08.1997"));
        data.add(new User("girish", "Girish Kumar", "04.08.1997"));
        data.add(new User("mbanici", "Marius Banici", "04.08.1997"));
        data.add(new User("nsurdu", "Nicu Surdu", "04.08.1997"));
        data.add(new User("poprea", "Paul Oprea", "04.08.1997"));
    }

    /*@RequestMapping(value = "/pages", method = RequestMethod.GET)
     public ModelAndView getPages() {
 
     ModelAndView model = new ModelAndView("userSearch");
     return model;
 
     }*/
    @RequestMapping(value = "/getUid", method = RequestMethod.GET)
    public @ResponseBody
    List<User> getTags(@RequestParam String tagName) {
        return simulateSearchResult(tagName);
    }

    @RequestMapping(value = "/getChartData", method = RequestMethod.GET)
    public @ResponseBody
    String getChartData(@RequestParam String id) {
        if (id.equals("BP")) {
            return bpChartData;
        } else {
            return colChartData;
        }
    }

    private List<User> simulateSearchResult(String tagName) {

        List<User> result = new ArrayList<>();

        // iterate a list and filter by tagName
        for (User tag : data) {
            if (tag.getId().contains(tagName)) {
                result.add(tag);
            }
        }

        return result;
    }

}
